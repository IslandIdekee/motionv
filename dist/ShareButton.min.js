!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.ShareButton=t()}(this,function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){var e,t,n;return n=function(e){return function(n){var o,i;o=t.className.split(/\s+/),i=o.indexOf(n),e(o,i,n),t.className=o.join(" ")}},t=this,e={add:n(function(e,t,n){~t||e.push(n)}),remove:n(function(e,t){~t&&e.splice(t,1)}),toggle:n(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:function(e){return!!~t.className.split(/\s+/).indexOf(e)},item:function(e){return t.className.split(/\s+/)[e]||null}},Object.defineProperty(e,"length",{get:function(){return t.className.split(/\s+/).length}}),e}}),void 0===NodeList.prototype[Symbol.iterator]&&(NodeList.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return{done:t>=e.length,value:e.item(t++)}}}});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(){function e(){o(this,e)}return r(e,[{key:"_hide",value:function(e){e.style.display="none"}},{key:"_show",value:function(e){e.style.display="block"}},{key:"_hasClass",value:function(e,t){return e.classList.contains(t)}},{key:"_addClass",value:function(e,t){e.classList.add(t)}},{key:"_removeClass",value:function(e,t){e.classList.remove(t)}},{key:"_isEncoded",value:function(e){return this.str=e.toRFC3986(),decodeURIComponent(e)!==e}},{key:"_encode",value:function(e){return"undefined"==typeof e||null===e||this._isEncoded(e)?e:e.toRFC3986()}},{key:"popup",value:function t(e){var n=this,o=void 0===arguments[1]?{}:arguments[1],t={width:500,height:350};t.top=screen.height/2-t.height/2,t.left=screen.width/2-t.width/2;var i=function(){var e=[],t=!0,i=!1,r=void 0;try{for(var a,s=Object.keys(o)[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var l=a.value,c=o[l];e.push(""+l+"="+n._encode(c))}}catch(u){i=!0,r=u}finally{try{!t&&s["return"]&&s["return"]()}finally{if(i)throw r}}return e.join("&")}();i&&(i="?"+i),window.open(e+i,"targetWindow","\n        toolbar=no,\n        location=no,\n        status=no,\n        menubar=no,\n        scrollbars=yes,\n        resizable=yes,\n        left="+t.left+",\n        top="+t.top+",\n        width="+t.width+",\n        height="+t.height+"\n      ")}},{key:"_merge",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){"object"!=typeof e&&(e={});for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];if("object"==typeof o){e[n]=this._merge(e[n],o);continue}e[n]=o}for(var i=2,r=arguments.length;r>i;i++)_merge(e,arguments[i]);return e})}]),e}();String.prototype.toRFC3986=function(){var e=encodeURIComponent(this);e.replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})},String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;s=c=l=void 0,o=!1;var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=r,n=a,o=!0}},l=function(e){function t(e,n){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.element=e,this.el={head:document.getElementsByTagName("head")[0],body:document.getElementsByTagName("body")[0]},this.config={enabledNetworks:0,protocol:"//",url:window.location.href,caption:null,title:this._defaultTitle(),image:this._defaultImage(),description:this._defaultDescription(),ui:{flyout:"top center",buttonText:"Share",buttonFont:!0,iconFont:!0,css:!0},networks:{googlePlus:{enabled:!0,url:null},twitter:{enabled:!0,url:null,description:null},facebook:{enabled:!0,loadSdk:!0,url:null,appId:null,title:null,caption:null,description:null,image:null},pinterest:{enabled:!0,url:null,image:null,description:null},email:{enabled:!0,title:null,description:null}}},this._setup(this.element,n)}return i(t,e),r(t,[{key:"open",value:function(){this._public("Open")}},{key:"close",value:function(){this._public("Close")}},{key:"toggle",value:function(){this._public("Toggle")}},{key:"_public",value:function(e){var t=!0,n=!1,o=void 0;try{for(var i,r=document.querySelectorAll(this.element)[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value,s=a.getElementsByClassName("social")[0];this["event"+e](s)}}catch(l){n=!0,o=l}finally{try{!t&&r["return"]&&r["return"]()}finally{if(n)throw o}}}},{key:"_setup",value:function(e,t){var n=document.querySelectorAll(e);this._merge(this.config,t),this._detectNetworks(),this._normalizeNetworkConfiguration(),this.config.ui.iconFont&&this._injectIcons(),this.config.ui.buttonFont&&this._injectFont(),this.config.networks.facebook.enabled&&this.config.networks.facebook.loadSdk&&this._injectFacebookSdk();var o=0,i=!0,r=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){{s.value}this._setupInstance(e,o++)}}catch(c){r=!0,a=c}finally{try{!i&&l["return"]&&l["return"]()}finally{if(r)throw a}}}},{key:"_setupInstance",value:function(e,t){var n=this,o=document.querySelectorAll(e)[t];this._hide(o),this._addClass(o,"sharer-"+t),o=document.querySelectorAll(e)[t],this._injectHtml(o),this.config.ui.css&&this._injectStylesheet("dist/styles.min.css"),this._show(o);var i=o.getElementsByTagName("label")[0],r=o.getElementsByClassName("social")[0],a=o.getElementsByTagName("li");this._addClass(r,"networks-"+this.config.enabledNetworks),i.addEventListener("click",function(){return n._eventToggle(r)});var s=function(e){var t=a[e];"undefined"!=typeof t&&t.addEventListener("click",function(){n._eventNetwork(o,t),n._eventClose(r)})};for(var l in Object.keys(a))s(l)}},{key:"_eventToggle",value:function(e){this._hasClass(e,"active")?this._eventClose(e):this._eventOpen(e)}},{key:"_eventOpen",value:function(e){this._hasClass(e,"load")&&this._removeClass(e,"load"),this._addClass(e,"active")}},{key:"_eventClose",value:function(e){this._removeClass(e,"active")}},{key:"_eventNetwork",value:function(e,t){var n=t.getAttribute("data-network");this._hook("before",n,e),this["_network"+n.capitalizeFirstLetter()](),this._hook("after",n,e)}},{key:"_networkFacebook",value:function(){return this.config.networks.facebook.loadSdk?window.FB?FB.ui({method:"feed",name:this.config.networks.facebook.title,link:this.config.networks.facebook.url,picture:this.config.networks.facebook.image,caption:this.config.networks.facebook.caption,description:this.config.networks.facebook.description}):console.error("The Facebook JS SDK hasn't loaded yet."):this.popup("https://www.facebook.com/sharer/sharer.php",{u:this.config.networks.facebook.url})}},{key:"_networkTwitter",value:function(){this.popup("https://twitter.com/intent/tweet",{text:this.config.networks.twitter.description,url:this.config.networks.twitter.url})}},{key:"_networkGooglePlus",value:function(){this.popup("https://plus.google.com/share",{url:this.config.networks.googlePlus.url})}},{key:"_networkPinterest",value:function(){this.popup("https://www.pinterest.com/pin/create/button",{url:this.config.networks.pinterest.url,media:this.config.networks.pinterest.image,description:this.config.networks.pinterest.description})}},{key:"_networkEmail",value:function(){this.popup("mailto:",{subject:this.config.networks.email.title,body:this.config.networks.email.description})}},{key:"_injectIcons",value:function(){this._injectStylesheet("https://www.sharebutton.co/fonts/v2/entypo.min.css")}},{key:"_injectFont",value:function(){this._injectStylesheet("https://fonts.googleapis.com/css?family=Lato:900&text=#{@config.ui.buttonText}")}},{key:"_injectStylesheet",value:function(e){if(!this.el.head.querySelector("link[href='"+e+"']")){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),this.el.head.appendChild(t)}}},{key:"_injectHtml",value:function(e){e.innerHTML="<label class='entypo-export'><span>"+this.config.ui.buttonText+"</span></label><div class='social load "+this.config.ui.flyout+"'><ul><li class='entypo-pinterest' data-network='pinterest'></li><li class='entypo-twitter' data-network='twitter'></li><li class='entypo-facebook' data-network='facebook'></li><li class='entypo-gplus' data-network='googlePlus'></li><li class='entypo-paper-plane' data-network='email'></li></ul></div>"}},{key:"_injectFacebookSdk",value:function(){if(!window.FB&&this.config.networks.facebook.appId&&!this.el.body.querySelector("#fb-root")){var e=document.createElement("script");e.text="window.fbAsyncInit=function(){FB.init({appId:'"+this.config.networks.facebook.appId+"',status:true,xfbml:true})};(function(e,t,n){var r,i=e.getElementsByTagName(t)[0];if(e.getElementById(n)){return}r=e.createElement(t);r.id=n;r.src='//connect.facebook.net/en_US/all.js';i.parentNode.insertBefore(r,i)})(document,'script','facebook-jssdk');";var t=document.createElement("div");t.id="fb-root",this.el.body.appendChild(t),this.el.body.appendChild(e)}}},{key:"_hook",value:function(e,t,n){var o=this.config.networks[t][e];if("function"==typeof o){var i=o.call(this.config.networks[t],n);void 0!==i&&(i=this._normalizeFilterConfigUpdates(i),this.extend(this.config.networks[t],i,!0),this._normalizeNetworkConfiguration())}}},{key:"_defaultTitle",value:function(){var e=void 0;if(e=document.querySelector('meta[property="og:title"]')||document.querySelector('meta[name="twitter:title"]'))e.getAttribute("content");else if(e=document.querySelector("title"))return e.innerText}},{key:"_defaultImage",value:function(){var e=void 0;(e=document.querySelector('meta[property="og:image"]')||document.querySelector('meta[name="twitter:image"]'))&&e.getAttribute("content")}},{key:"_defaultDescription",value:function(){var e=void 0;return(e=document.querySelector('meta[property="og:description"]')||document.querySelector('meta[name="twitter:description"]')||document.querySelector('meta[name="description"]'))?void e.getAttribute("content"):""}},{key:"_detectNetworks",value:function(){var e=!0,t=!1,n=void 0;try{for(var o,i=Object.keys(this.config.networks)[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var r=o.value,a=void 0;this.config.networks[r].enabled?(a="block",this.config.enabledNetworks+=1):a="none",this.config.networks[r].display=a}}catch(s){t=!0,n=s}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw n}}}},{key:"_normalizeNetworkConfiguration",value:function(){this.config.networks.facebook.appId||(this.config.networks.facebook.loadSdk=!1),this.config.networks.twitter.description&&(this.isEncoded(this.config.networks.twitter.description)||(this.config.networks.twitter.description=encodeURIComponent(this.config.networks.twitter.description))),"number"==typeof this.config.networks.facebook.appId&&(this.config.networks.facebook.appId=this.config.networks.facebook.appId.toString())}},{key:"_normalizeFilterConfigUpdates",value:function(e){return this.config.networks.facebook.appId!==e.appId&&(console.warn("You are unable to change the Facebook appId after the button has been initialized. Please update your Facebook filters accordingly."),delete e.appId),this.config.networks.facebook.loadSdk!==e.loadSdk&&(console.warn("You are unable to change the Facebook loadSdk option after the button has been initialized. Please update your Facebook filters accordingly."),delete e.appId),e}}]),t}(a);return l});